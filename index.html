<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BOBOY — Интерактивное меню</title>
  <meta name="description" content="BOBOY — Uzbek Eatery. Полное меню, блюдо дня, выбор языка, адаптивный интерфейс." />
  <script src="https://cdn.tailwindcss.com">
  // ====== Modal logic for Kazan Kebab ======
  const DISH_IMG_WEBP = {
    'kazan_kebab':'казан-кабоб.webp',
    'lagman_uyghur':'Лагман Уйгурский.webp',
    'beef_kebab':'шашлыки.webp'
  };
  function openDishModal(id){
    const modal=document.getElementById('dish-modal');
    if(!modal) return;
    const item=ITEMS[id];
    const t=document.getElementById('dish-modal-title');
    const d=document.getElementById('dish-modal-desc');
    const p=document.getElementById('dish-modal-price');
    const img=document.getElementById('dish-modal-img');
    t.textContent=locName(item.name);
    d.textContent=HERO_DESC_BY_ID[lang]?.[id] || STR[lang].dishOfDayDesc;
    p.textContent=fmt(item.price);
    img.src=DISH_IMG_WEBP[id]||img.src;
    img.alt=locName(item.name);
    modal.classList.add('open');
    // Prevent background scroll on mobile
    document.body.style.overflow='hidden';
  }
  function closeDishModal(){
    const modal=document.getElementById('dish-modal');
    if(!modal) return;
    modal.classList.remove('open');
    document.body.style.overflow='';
  }
  document.getElementById('dish-modal-close')?.addEventListener('click',closeDishModal);
  document.getElementById('dish-modal')?.addEventListener('click',e=>{ if(e.target.id==='dish-modal') closeDishModal(); });
  window.addEventListener('keydown',e=>{ if(e.key==='Escape') closeDishModal(); });

  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
  <!-- preload art -->
  <link rel="preload" as="image" href="4.webp">
  <link rel="preload" as="image" href="6.webp">
  <link rel="preload" as="image" href="10.webp">
  <style>
    :root{
      --brand-beige:#FDF6E9;
      --brand-champagne-gold:#E0C097;
      --brand-dark-text:#404040;
      --brand-accent:#8D6E63;
      --brand-blue:#1D4ED8; /* фирменный синий логотипа */
      --brand-deep-blue:#0b2e78; /* более тёмный для заголовков разделов */
    }
    html,body{background-color:var(--brand-beige);color:var(--brand-dark-text);font-family:'Open Sans',sans-serif}

    /* ===== Декор теперь управляется скриптом с учётом меню и футера ===== */
    #decor-layer{position:relative;z-index:0;pointer-events:none}
    #left-art{position:fixed;/* координаты вычисляются JS */ width:clamp(360px,48vw,640px);height:auto;opacity:1;z-index:0}
    #donkey-art{position:fixed;right:0;bottom:0;width:clamp(220px,24vw,360px);height:auto;opacity:1;z-index:0}
    @media (max-width: 768px){
      #left-art{width:90vw}
      #donkey-art{right:6px;bottom:8px;width:40vw}
    }

    header,section,main,footer{position:relative;z-index:1}

    .no-scrollbar{-ms-overflow-style:none;scrollbar-width:none}.no-scrollbar::-webkit-scrollbar{display:none}
    .font-heading{font-family:'Montserrat',sans-serif}
    h1,h2,h3{font-family:'Montserrat',sans-serif;color:var(--brand-blue);font-weight:800}

    /* Тёмно-синие заголовки разделов меню + белый контур */
    .section-title{color:var(--brand-deep-blue);
      /* Чёткий непрозрачный белый контур для читаемости */
      -webkit-text-stroke: 1px #fff; /* поддерживается в WebKit/Chromium */
      paint-order: stroke fill;
      /* Фолбэк: плотная обводка из теней для всех браузеров */
      text-shadow: -1px -1px 0 #fff, 1px -1px 0 #fff, -1px 1px 0 #fff, 1px 1px 0 #fff, 0 0 2px #fff;
    }

    .fade-in{animation:fade .6s cubic-bezier(.25,.46,.45,.94) both}
    @keyframes fade{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
    .modal-enter{animation:modal .4s cubic-bezier(.25,.46,.45,.94) both}
    @keyframes modal{from{opacity:0;transform:scale(.96) translateY(10px)}to{opacity:1;transform:scale(1) translateY(0)}}

    /* кнопки */
    .btn-primary{background-color:var(--brand-blue);color:#fff;transition:all .25s ease;box-shadow:0 4px 20px rgba(29,78,216,.22)}
    .btn-primary:hover{background-color:#1E40AF;transform:translateY(-2px);box-shadow:0 10px 28px rgba(29,78,216,.28)}

    .card{background:#fff;border:1px solid #EAE0D5;border-radius:1.25rem;transition:box-shadow .3s ease,transform .3s ease;box-shadow:0 5px 25px rgba(64,64,64,.08);overflow:hidden}
    .card:hover{transform:translateY(-6px);box-shadow:0 16px 40px rgba(64,64,64,.14)}

    .input-styled{background:#fff;border:1px solid #EAE0D5;outline:none;transition:all .2s ease}
    .input-styled:focus{box-shadow:0 0 0 3px rgba(224,192,151,.6);border-color:var(--brand-champagne-gold)}

    /* HERO фон (4.png) */
    .hero-bg{position:relative;background:#fff}
    .hero-bg::before{content:'';position:absolute;inset:0;background-image:url('4.webp');background-size:cover;background-position:center bottom;z-index:0;opacity:.24}
    .hero-bg::after{content:'';position:absolute;inset:0;background:linear-gradient(to top,rgba(253,246,233,1) 0%,rgba(253,246,233,.55) 35%,rgba(253,246,233,0) 60%);z-index:0}
    .hero-content{position:relative;z-index:1}

    .header-cart-btn{background:var(--brand-beige);border:1px solid transparent;transition:all .25s ease}
    .header-cart-btn:hover{background:#fff;border-color:var(--brand-champagne-gold);box-shadow:0 4px 15px rgba(224,192,151,.2)}

    .chip{border:1px solid #EAE0D5;background:#fff}
    .chip.active{border-color:var(--brand-blue);background:rgba(29,78,216,.08);color:var(--brand-blue)}

    /* подсказка свайпа */
    .swipe-hint{position:fixed;left:50%;transform:translateX(-50%);bottom:78px;background:rgba(0,0,0,.55);color:#fff;font-weight:600;border-radius:999px;padding:8px 14px;z-index:25;animation:hintfade 2.4s ease forwards;font-size:12px}
    @keyframes hintfade{0%{opacity:0;transform:translate(-50%,20px)}20%{opacity:1;transform:translate(-50%,0)}80%{opacity:1}100%{opacity:0}}

    /* Футер: контраст + фон 10.png */
    .footer-art{position:relative;z-index:0;overflow:hidden}
    .footer-art::before{content:'';position:absolute;inset:0;background:url('10.webp') center bottom/cover no-repeat;opacity:.85;pointer-events:none;z-index:0}
    /* светлая подложка для читаемости */
    .footer-art::after{content:'';position:absolute;inset:0;background:linear-gradient(to top, rgba(253,246,233,.92) 0%, rgba(253,246,233,.86) 40%, rgba(253,246,233,.68) 100%);z-index:0}
    .footer-contrast h3,.footer-contrast .font-heading{color:var(--brand-blue)}
    .footer-contrast p,.footer-contrast li,.footer-contrast a{color:#0b1220}
    .footer-contrast a{font-weight:700;text-decoration:none}
    /* контент внутри футера всегда над фоном */
    .footer-art > .footer-contrast{position:relative;z-index:1;opacity:1;filter:none}

    /* HERO слайдер: анимации */
    .slide-out{animation:slideOut .45s ease both}
    .slide-in{animation:slideIn .45s ease both}
    @keyframes slideOut{from{opacity:1;transform:translateX(0)}to{opacity:0;transform:translateX(-40px)}}
    @keyframes slideIn{from{opacity:0;transform:translateX(40px)}to{opacity:1;transform:translateX(0)}}

    /* Жёсткий фикс от "дергания" текста в hero */
    #hero-text{will-change:height;contain:layout paint}

    /* HERO: ручное управление слайдером */
    #hero-slider{touch-action: pan-y;}
    .hero-arrow{position:absolute;top:50%;transform:translateY(-50%);width:44px;height:44px;border-radius:9999px;background:#fff;border:1px solid #EAE0D5;display:flex;align-items:center;justify-content:center;box-shadow:0 8px 24px rgba(0,0,0,.08);z-index:5;opacity:.95}
    .hero-arrow:hover{box-shadow:0 12px 28px rgba(0,0,0,.14)}
    .hero-arrow.left{left:8px}
    .hero-arrow.right{right:8px}
    @media (max-width:768px){.hero-arrow{width:40px;height:40px}}

    /* Language gate */
    .lang-gate{position:fixed;inset:0;background:rgba(0,0,0,.5);backdrop-filter:blur(4px);display:none;align-items:center;justify-content:center;z-index:50}
    .lang-card{background:#fff;border-radius:1.25rem;box-shadow:0 20px 60px rgba(0,0,0,.25);padding:28px;max-width:520px;width:calc(100% - 32px);}
    .lang-grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px;margin-top:16px}
    .lang-tile{display:flex;align-items:center;justify-content:center;border:1px solid #EAE0D5;border-radius:14px;padding:14px 10px;font-weight:700;cursor:pointer;transition:transform .15s ease, box-shadow .2s ease}
    .lang-tile:hover{transform:translateY(-2px);box-shadow:0 10px 24px rgba(0,0,0,.08)}
  
/* ===== Dish modal (плашка) ===== */
.menu-modal-mask{position:fixed;inset:0;background:rgba(0,0,0,.55);backdrop-filter:blur(3px);display:none;align-items:center;justify-content:center;z-index:60;padding:16px}
.menu-modal-mask.open{display:flex}
.menu-modal-card{background:#fff;border-radius:1.25rem;box-shadow:0 24px 72px rgba(0,0,0,.35);max-width:980px;width:100%;overflow:hidden}
@media (max-width:768px){
  .menu-modal-card{border-radius:1rem}
}
.menu-modal-grid{display:grid;grid-template-columns:1fr 1fr}
@media (max-width:768px){
  .menu-modal-grid{grid-template-columns:1fr}
}
.menu-modal-img{width:100%;height:100%;object-fit:cover}
.menu-modal-body{padding:22px 22px 26px 22px}
.menu-modal-title{font-family:'Montserrat',sans-serif;font-weight:800;color:var(--brand-blue);font-size:clamp(22px,2.6vw,32px);line-height:1.15}
.menu-modal-desc{margin-top:8px;color:#4b5563}
.menu-modal-price{display:inline-flex;align-items:center;gap:8px;margin-top:18px;padding:10px 16px;border-radius:999px;background:rgba(224,192,151,.25);border:1px solid rgba(224,192,151,.6);font-weight:800}
.menu-modal-close{position:absolute;top:10px;right:12px;width:36px;height:36px;border-radius:999px;background:#fff;border:1px solid #EAE0D5;display:flex;align-items:center;justify-content:center}
.menu-modal-close:hover{background:#f9fafb}

  </style>
</head>
<body class="min-h-screen">
  <!-- Декор: реальные DOM-элементы -->
  <div id="decor-layer" aria-hidden="true">
    <img id="left-art" src="6.webp" alt="Фоновая иллюстрация слева">
    <img id="donkey-art" src="img399.webp" alt="Насреддин с ослом">
  </div>

  <!-- Topbar -->
  <header class="sticky top-0 z-40 backdrop-blur-xl bg-white/80 border-b border-gray-200/60">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex items-center justify-between gap-4">
      <div class="flex items-center gap-3">
        <!-- Заменён логотип на обрезанный файл -->
        <img src="BOBOY_logo_basic_blue (1).png" alt="BOBOY" class="h-10 w-auto">
        <div class="leading-tight">
          <div class="font-heading font-extrabold text-2xl tracking-wide" style="color:var(--brand-blue)">BOBOY</div>
          <div id="subtitle" class="text-xs uppercase tracking-wider" style="color:var(--brand-dark-text)">UZBEK EATERY</div>
        </div>
      </div>
      <div class="flex items-center gap-3">
        <!-- Кнопка смены языка: только иконка мира -->
        <button id="change-language" class="inline-flex items-center px-3 py-2 rounded-lg bg-white/0 hover:bg-gray-500/5 transition text-sm" aria-label="Язык">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="opacity-70"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>
        </button>
        <!-- Кнопка заказа УДАЛЕНА по просьбе: убран калькулятор и кнопка "Заказ" -->
      </div>
    </div>
  </header>

  <!-- HERO (4.png в фоне, автосмена каждые 5с) -->
  <section id="hero-slider" class="relative overflow-hidden hero-bg select-none">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24 hero-content">
      <div class="grid md:grid-cols-2 gap-12 items-center">
        <div id="hero-text" class="fade-in">
          <div class="inline-flex items-center gap-2.5 px-4 py-1.5 rounded-full" style="background-color: rgba(184,158,115,0.1); border: 1px solid rgba(184,158,115,0.3);">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="#d02a2a" stroke="#d02a2a" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M11.16 2.37A3.37 3.37 0 008.25 2a3.37 3.37 0 00-2.91.37c-2.53.85-3.41 4.33-2.22 6.58 1.9 3.63 6.62 7.74 6.88 7.94a.5.5 0 00.7 0c.26-.2 4.98-4.31 6.88-7.94 1.19-2.25.31-5.73-2.22-6.58A3.37 3.37 0 0015.75 2a3.37 3.37 0 00-2.91.37l-1.68 1.55-1.68-1.55z"/></svg>
            <span id="dishOfDayLabel" class="text-sm uppercase tracking-wider font-semibold" style="color:var(--brand-accent);">Блюдо дня</span>
          </div>
          <h1 id="dishOfDayName" class="mt-5 text-4xl lg:text-6xl font-extrabold leading-tight tracking-tighter">—</h1>
          <p id="dishOfDayDesc" class="mt-5 text-lg max-w-prose leading-relaxed">—</p>
          <div class="mt-8 flex items-center gap-4" id="dishOfDayBadges"></div>
        </div>
        <div class="fade-in" style="animation-delay:.1s">
          <div class="relative card p-3 shadow-2xl">
            <div class="relative aspect-square rounded-xl overflow-hidden">
              <!-- Первичная картинка: лагман -->
              <img id="dishOfDayImage" src="Лагман Уйгурский.webp" alt="Лагман уйгурский" class="w-full h-full object-cover transform transition-transform duration-500 ease-in-out">
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Кнопки управления -->
    <button class="hero-arrow left" aria-label="Предыдущий слайд">
      <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
    </button>
    <button class="hero-arrow right" aria-label="Следующий слайд">
      <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
    </button>
  </section>

  <!-- Controls -->
  <section class="sticky top-[73px] z-30 border-b border-gray-200/80 bg-white/80 backdrop-blur-xl">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex flex-col gap-4">
      <div class="flex flex-col md:flex-row md:items-center gap-4">
        <div class="relative flex-1">
          <svg class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
          <input id="search" placeholder="Поиск по меню…" class="w-full pl-12 pr-4 py-3 text-base rounded-full input-styled">
        </div>
        <button id="vegOnlyBtn" class="inline-flex items-center justify-center gap-2 px-5 py-3 rounded-full border transition-colors border-gray-200 hover:bg-gray-50 font-semibold text-sm">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none" stroke="currentColor" class="text-green-500"><path d="M7 14c-3 0-4-1-4-4 0-3 2-6 5-7 3 1 5 4 5 7s-1 4-4 4-2-1-2-1zM4 15c2 2 6 2 8 0"/></svg>
          <span id="vegOnlyLabel">Только вегетарианское</span>
        </button>
      </div>
      <div id="cat-chips" class="flex gap-2 overflow-x-auto no-scrollbar pb-1"></div>
    </div>
  </section>

  <!-- ОДИН РАЗДЕЛ МЕНЮ НА ЭКРАНЕ -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 md:py-14" id="menu-root"></main>

  <!-- FOOTER с 10.png -->
  <footer class="border-t border-gray-200/80 bg-white footer-art">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 grid md:grid-cols-3 gap-8 footer-contrast">
      <div>
        <div class="font-heading font-semibold text-xl" style="color:var(--brand-blue)">BOBOY</div>
        <p id="footerCopy" class="text-sm mt-2 leading-relaxed">Атмосфера Узбекистана: уникальные ароматы и вкусы.</p>
      </div>
      <div>
        <h3 id="locationsLabel" class="font-heading font-semibold mb-4">Адреса</h3>
        <ul class="space-y-3 text-sm">
          <li class="flex items-start gap-3"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="mt-0.5 opacity-70 flex-shrink-0"><path d="M21 10c0 6-9 12-9 12S3 16 3 10a9 9 0 1118 0z"></path><circle cx="12" cy="10" r="3"></circle></svg> <div><strong>Tashkent City Mall</strong><br>3-й этаж, +998 77 109 88 77</div></li>
          <li class="flex items-start gap-3"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="mt-0.5 opacity-70 flex-shrink-0"><path d="M21 10c0 6-9 12-9 12S3 16 3 10a9 9 0 1118 0z"></path><circle cx="12" cy="10" r="3"></circle></svg> <div><strong>ул. Тараса Шевченко, 38А</strong><br>+998 77 235 88 77</div></li>
        </ul>
      </div>
      <div>
        <h3 class="font-heading font-semibold mb-4">Instagram</h3>
        <a href="#" class="inline-flex items-center gap-2 hover:text-brand-accent font-semibold transition-colors">@boboycafe_uz</a>
        <p id="allergyNote" class="text-xs text-gray-700 mt-4">Пожалуйста, предупредите нас о любых аллергиях. Состав блюд может незначительно отличаться.</p>
      </div>
    </div>
  </footer>

  <!-- Language gate -->
  <div id="lang-gate" class="lang-gate">
    <div class="lang-card">
      <div class="font-heading text-2xl font-extrabold text-center">Выберите язык</div>
      <div class="text-center text-sm text-gray-600 mt-1">Choose language / Tilni tanlang</div>
      <div class="lang-grid">
        <button class="lang-tile" data-lang="ru">Русский</button>
        <button class="lang-tile" data-lang="en">English</button>
        <button class="lang-tile" data-lang="uz">Oʻzbekcha</button>
      </div>
    </div>
  </div>

  <script>
  // ===== Strings =====
  const STR={
    ru:{topbarSubtitle:"UZBEK EATERY",changeLanguage:"Язык",dishOfDay:"Блюдо дня",dishOfDayDesc:"Подборка хитов BOBOY: лагман, шашлыки и казан‑кабаб.",chefRecommends:"Рекомендует шеф",vegetarian:"Вегетарианское",searchPlaceholder:"Поиск по меню…",vegOnly:"Только вегетарианское",locations:"Адреса",footerCopy:"Атмосфера Узбекистана: уникальные ароматы и вкусы.",allergyNote:"Пожалуйста, предупредите нас о любых аллергиях. Состав блюд может незначительно отличаться.",addToOrder:"В заказ",cartTitle:"Ваш заказ / Калькулятор",cartEmpty:"Ваша корзина пуста",subtotal:"Подытог",serviceCharge:"Процент за обслуживание (%)",total:"ИТОГО",clearCart:"Очистить заказ",tabOrder:"Принять заказ",tabGroup:"Расчет на группу",groupItem:"Выберите блюдо или сет:",groupPeople:"Количество человек:",groupPerPerson:"Цена на человека:",groupTotal:"Общая стоимость:"},
    en:{topbarSubtitle:"UZBEK EATERY",changeLanguage:"Language",dishOfDay:"Dish of the Day",dishOfDayDesc:"BOBOY best-sellers: lagman, kebabs and kazan kebab.",chefRecommends:"Chef recommends",vegetarian:"Vegetarian",searchPlaceholder:"Search the menu…",vegOnly:"Vegetarian only",locations:"Locations",footerCopy:"Immerse yourself in Uzbekistan’s unique tastes and aromas.",allergyNote:"Please let us know about any allergies. Ingredients may vary slightly.",addToOrder:"Add to order",cartTitle:"Your Order / Calculator",cartEmpty:"Your cart is empty",subtotal:"Subtotal",serviceCharge:"Service Charge (%)",total:"TOTAL",clearCart:"Clear Order",tabOrder:"Take Order",tabGroup:"Group Calculator",groupItem:"Select item or set:",groupPeople:"Number of people:",groupPerPerson:"Price per person:",groupTotal:"Total cost:"},
    uz:{topbarSubtitle:"UZBEK EATERY",changeLanguage:"Til",dishOfDay:"Kun taomi",dishOfDayDesc:"BOBOY xitlari: lag'mon, kabob va qozon kabob.",chefRecommends:"Shef tavsiya qiladi",vegetarian:"Vegetarian",searchPlaceholder:"Menyu bo‘yicha qidirish…",vegOnly:"Faqat vegetarian",locations:"Manzillar",footerCopy:"Oʻzbekistonning oʻziga xos tamlari va hidlari.",allergyNote:"Allergiyangiz bo‘lsa, oldindan ayting. Tarkib biroz farq qilishi mumkin.",addToOrder:"Qo'shish",cartTitle:"Sizning buyurtmangiz / Kalkulyator",cartEmpty:"Sizning savatingiz bo'sh",subtotal:"Jami",serviceCharge:"Xizmat haqi (%)",total:"UMUMIY",clearCart:"Buyurtmani tozalash",tabOrder:"Buyurtma berish",tabGroup:"Guruh uchun hisoblash",groupItem:"Taom yoki to'plamni tanlang:",groupPeople:"Odamlar soni:",groupPerPerson:"Bir kishi uchun narx:",groupTotal:"Umumiy narx:"}
  };

  // ===== Items & Categories =====
  const ITEMS=(()=>{const I=(id,name,price,opts={})=>({id,name,price,description:{ru:'',en:'',uz:''},...opts});return{
    /* УДАЛЕНО: spicy_pilaf, passion_mango_lemonade */
    khach_ap:I("khach_ap",{ru:"Хачапури по-аджарски",en:"Khachapuri (Adjarian)",uz:"Xachapuri-Ajar"},73000,{veg:true}),
    kazan_kebab:I("kazan_kebab",{ru:"Казан-кабоб",en:"Kazan Kebab",uz:"Qozon kabob"},159000),
    /* остальное меню */
    suzma:I("suzma",{ru:"Сузма",en:"Suzma",uz:"Suzma"},25000,{veg:true}),
    marinated_veg:I("marinated_veg",{ru:"Маринованные овощи",en:"Marinated Vegetables",uz:"Tuzlangan sabzavotlar"},38000,{veg:true}),
    kulcha:I("kulcha",{ru:"Домашний хлеб (кулча)",en:"House Bread (Kulcha)",uz:"Non (Kulcha)"},15000,{veg:true}),
    garlic_nan:I("garlic_nan",{ru:"Чесночный нан",en:"Garlic Nan",uz:"Sarimsoqli non"},28000,{veg:true}),
    khach_meg:I("khach_meg",{ru:"Хачапури по-мегрельски",en:"Khachapuri (Megrelian)",uz:"Xachapuri-Megrel"},73000,{veg:true}),
    cheb_beef:I("cheb_beef",{ru:"Мини-чебурек с говядиной (4 шт)",en:"Mini Cheburek with Beef (4 pcs)",uz:"Mini cheburek (go‘shtli) (4 dona)"},40000),
    cheb_cheese:I("cheb_cheese",{ru:"Мини-чебурек с сыром (4 шт)",en:"Mini Cheburek with Cheese (4 pcs)",uz:"Mini cheburek (pishloqli) (4 dona)"},35000,{veg:true}),
    somsa_trad:I("somsa_trad",{ru:"Самса традиционная",en:"Somsa Traditional",uz:"Tandir somsa"},20000),
    somsa_olot:I("somsa_olot",{ru:"Самса Олот",en:"Somsa Olot",uz:"Olot somsa"},15000),
    turkish_meze:I("turkish_meze",{ru:"Турецкий мезе сет",en:"Turkish Meze Set",uz:"Turkcha mezze seti"},95000),
    achik:I("achik",{ru:"Ачик-чучук",en:"Achik Chuchuk",uz:"Achik chuchuk"},29000,{veg:true}),
    caesar:I("caesar",{ru:"Цезарь с курицей",en:"Caesar with Chicken",uz:"Salat Sezar tovuqli"},89000),
    greek:I("greek",{ru:"Греческий салат",en:"Greek Salad",uz:"Greck salad"},79000,{veg:true}),
    bakhor:I("bakhor",{ru:"Салат Бахор",en:"Salad Bakhor",uz:"Bahor salati"},45000,{veg:true}),
    olivier:I("olivier",{ru:"Оливье",en:"Olivier Salad",uz:"Salat Olivye"},63000),
    eggplant_tempura:I("eggplant_tempura",{ru:"Салат с баклажаном темпура",en:"Eggplant Tempura Salad",uz:"Qarsildoq baqlajon"},69000,{veg:true}),
    choban:I("choban",{ru:"Чобан салат",en:"Choban Salad",uz:"Choban salat"},69000,{veg:true}),
    kainatma:I("kainatma",{ru:"Кайнатма шурпа",en:"Kainatma Shurpa",uz:"Qaynatma sho‘rva"},79000),
    lagman_uyghur:I("lagman_uyghur",{ru:"Лагман уйгурский",en:"Lagman Uyghur",uz:"Uyg‘ur lag‘mon"},63000),
    mastava:I("mastava",{ru:"Мастава",en:"Mastava",uz:"Mastava"},55000),
    chicken_noodle:I("chicken_noodle",{ru:"Куриный суп с лапшой",en:"Chicken Noodle Soup",uz:"Tovuqli sho‘rva"},49000),
    chuchvara:I("chuchvara",{ru:"Чучвара",en:"Chuchvara",uz:"Chuchvara"},61000),
    moshxurda:I("moshxurda",{ru:"Мошхурда",en:"Moshxurda",uz:"Moshxo‘rda"},65000),
    lentil:I("lentil",{ru:"Чечевичный суп",en:"Lentil Soup",uz:"Yasmiq sho'rva"},40000,{veg:true}),
    festive_pilaf:I("festive_pilaf",{ru:"Праздничный плов",en:"Festive Pilaf",uz:"Osh"},50000),
    say_beef:I("say_beef",{ru:"Сай говяжий",en:"Beef SAY",uz:"Go‘shtli Say"},89000),
    manti:I("manti",{ru:"Манты (1 шт)",en:"Manti (1 pc)",uz:"Manti (1 dona)"},19000),
    fried_lagman:I("fried_lagman",{ru:"Лагман жареный",en:"Fried Lagman",uz:"Qovurma lag‘mon"},73000),
    norin:I("norin",{ru:"Норин",en:"Norin",uz:"Norin"},93000),
    minced_beef:I("minced_beef",{ru:"Кийма шашлык",en:"Minced Beef Kebab",uz:"Qiyma kabob"},35000),
    beef_kebab:I("beef_kebab",{ru:"Шашлык из говядины",en:"Beef Kebab",uz:"Mol jaz"},43000),
    lamb_kebab:I("lamb_kebab",{ru:"Шашлык из баранины",en:"Lamb Kebab",uz:"Qo‘y jaz"},45000),
    lamb_chops:I("lamb_chops",{ru:"Каре ягнёнка",en:"Lamb chops",uz:"Qo‘zi qovurg‘asi"},75000),
    chicken_wings:I("chicken_wings",{ru:"Куриные крылья",en:"Chicken Wings",uz:"Tovuq qanoti"},42000),
    veg_kebab:I("veg_kebab",{ru:"Овощной шашлык",en:"Vegetarian Kebab",uz:"Sabzavotli kabob"},35000,{veg:true}),
    napoleon:I("napoleon",{ru:"Наполеон",en:"Napoleon",uz:"Napoleon"},69000,{veg:true}),
    honey_cake:I("honey_cake",{ru:"Медовик",en:"Honey Cake",uz:"Medovik"},72000,{veg:true}),
    san_sebastian:I("san_sebastian",{ru:"Сан-Себастьян",en:"San Sebastian Cheesecake",uz:"San Sebastyan"},79000,{veg:true}),
    bakhlava:I("bakhlava",{ru:"Пахлава",en:"Bakhlava",uz:"Paxlava"},59000,{veg:true}),
    classic_mojito:I("classic_mojito",{ru:"Мохито классический",en:"Classic Mojito",uz:"Klassik moxito"},41000,{veg:true}),
    ayran:I("ayran",{ru:"Айран",en:"Ayran",uz:"Ayron"},35000,{veg:true}),
    black_tea:I("black_tea",{ru:"Чай черный",en:"Black tea",uz:"Qora choy"},29000,{veg:true})
  }})();

  const CATEGORIES={
    starters:["suzma","marinated_veg","kulcha","garlic_nan","khach_ap","khach_meg","cheb_beef","cheb_cheese","somsa_trad","somsa_olot","turkish_meze"],
    salads:["achik","caesar","greek","bakhor","olivier","eggplant_tempura","choban"],
    soups:["kainatma","lagman_uyghur","mastava","chicken_noodle","chuchvara","moshxurda","lentil"],
    mains:["festive_pilaf","say_beef","manti","kazan_kebab","fried_lagman","norin"], /* spicy_pilaf удалён */
    kebabs:["minced_beef","beef_kebab","lamb_kebab","lamb_chops","chicken_wings","veg_kebab"],
    desserts:["napoleon","honey_cake","san_sebastian","bakhlava"],
    drinks:["classic_mojito","ayran","black_tea"] /* passion_mango_lemonade удалён */
  };
  const CAT_NAMES={ru:{starters:"Закуски",salads:"Салаты",soups:"Супы",mains:"Горячие блюда",kebabs:"Шашлыки",desserts:"Десерты",drinks:"Напитки"},en:{starters:"Starters",salads:"Salads",soups:"Soups",mains:"Main Courses",kebabs:"Kebabs",desserts:"Desserts",drinks:"Drinks"},uz:{starters:"Yaxna taomlar",salads:"Salatlar",soups:"Sho‘rvalar",mains:"Asosiy taomlar",kebabs:"Kaboblar",desserts:"Shirinliklar",drinks:"Ichimliklar"}};

  let lang=localStorage.getItem('boboy_lang')||'ru';
  let vegOnly=false; let query='';
  let cart=JSON.parse(localStorage.getItem('boboy_cart'))||[]; // корзина останется в коде, но UI отключен
  let activeCatIdx=parseInt(sessionStorage.getItem('active_cat_idx')||'0')||0; // одна категория на экране

  const $=s=>document.querySelector(s); const $$=s=>Array.from(document.querySelectorAll(s));
  const fmt=n=>new Intl.NumberFormat('ru-RU').format(n)+' UZS';
  const locName=o=>o[lang]||o.ru;

  function renderTopCopy(){
    $('#subtitle').textContent=STR[lang].topbarSubtitle;  $('#change-language')?.setAttribute('aria-label', STR[lang].changeLanguage);
    $('#vegOnlyLabel').textContent=STR[lang].vegOnly;
    const searchEl=$('#search'); if(searchEl) searchEl.placeholder=STR[lang].searchPlaceholder;
    $('#locationsLabel').textContent=STR[lang].locations;
    $('#footerCopy').textContent=STR[lang].footerCopy;
    $('#allergyNote').textContent=STR[lang].allergyNote;
    renderCategoryChips();
  }

  // HERO конвейер (слайды: лагман, шашлык, казан‑кабаб)
  const HERO_IDS=["lagman_uyghur","beef_kebab","kazan_kebab"];
  const HERO_IMG_SRC={
    lagman_uyghur:"Лагман Уйгурский.webp",
    beef_kebab:"шашлыки.webp",
    kazan_kebab:"казан-кабоб.webp"
  };
  const HERO_DESC_BY_ID={
    ru:{lagman_uyghur:"Классический лагман на ручной лапше.",beef_kebab:"Сочные шашлыки с мангала.",kazan_kebab:"Казан‑кабаб — мясо и картофель в казане."},
    en:{lagman_uyghur:"Classic Uyghur lagman with hand‑pulled noodles.",beef_kebab:"Juicy kebabs from the grill.",kazan_kebab:"Kazan kebab — hearty meat & potatoes."},
    uz:{lagman_uyghur:"Qo'l tortilgan lag'mon.",beef_kebab:"Shirador kaboblar.",kazan_kebab:"Qozon kabob — go'sht va kartoshka."}
  };
  let heroIdx=0, heroTimer=null;
  function applyHero(id){
    const d=ITEMS[id]; if(!d) return;
    const name=$('#dishOfDayName'), desc=$('#dishOfDayDesc'), img=$('#dishOfDayImage'), badges=$('#dishOfDayBadges'), box=$('#hero-text');

    const startH=box.offsetHeight; box.style.height=startH+'px';

    [name,desc].forEach(el=>el&&el.classList.add('slide-out')); if(img){img.classList.add('slide-out')}

    setTimeout(()=>{
      if(name) name.textContent=locName(d.name);
      if(desc) desc.textContent=HERO_DESC_BY_ID[lang]?.[id] || STR[lang].dishOfDayDesc;
      if(img){ img.src = HERO_IMG_SRC[id] || img.src; img.alt=locName(d.name); }
      if(badges) badges.innerHTML=`<span class="inline-flex items-center gap-2 px-4 py-2 rounded-full text-lg border bg-amber-500/10 border-amber-500/20 text-amber-800 font-bold">${fmt(d.price)}</span>`;

      [name,desc].forEach(el=>{el&&el.classList.remove('slide-out');el&&el.classList.add('slide-in')}); if(img){img.classList.remove('slide-out');img.classList.add('slide-in')}

      requestAnimationFrame(()=>{const newH=box.scrollHeight; box.style.transition='height .3s ease'; box.style.height=newH+'px'; setTimeout(()=>{box.style.height=''; box.style.transition='';},360)});
      setTimeout(()=>{[name,desc,img].forEach(el=>el&&el.classList.remove('slide-in'))},480);
    },200);
  }
  function startHero(){applyHero(HERO_IDS[heroIdx]);restartHeroTimer();}
  function restartHeroTimer(){if(heroTimer) clearInterval(heroTimer);heroTimer=setInterval(()=>{heroIdx=(heroIdx+1)%HERO_IDS.length;applyHero(HERO_IDS[heroIdx]);},5000)}
  function nextHero(){heroIdx=(heroIdx+1)%HERO_IDS.length;applyHero(HERO_IDS[heroIdx]);restartHeroTimer()}
  function prevHero(){heroIdx=(heroIdx-1+HERO_IDS.length)%HERO_IDS.length;applyHero(HERO_IDS[heroIdx]);restartHeroTimer()}
  function enableHeroManual(){
    const area=document.getElementById('hero-slider');
    if(!area) return;
    // Кнопки
    area.querySelector('.hero-arrow.left')?.addEventListener('click',prevHero);
    area.querySelector('.hero-arrow.right')?.addEventListener('click',nextHero);
    // Touch свайп
    let sx=null,sy=null,active=false;const TH=40;
    area.addEventListener('touchstart',e=>{const t=e.changedTouches[0];sx=t.clientX;sy=t.clientY;active=true},{passive:true});
    area.addEventListener('touchmove',e=>{
      if(!active) return; const t=e.changedTouches[0];
      const dx=t.clientX-sx; const dy=t.clientY-sy;
      if(Math.abs(dx)>Math.abs(dy)*1.5 && Math.abs(dx)>TH){
        active=false; if(dx<0)nextHero(); else prevHero();
      }
    },{passive:true});
    area.addEventListener('touchend',()=>{active=false},{passive:true});
    // Mouse/Pointer свайп
    let px=null,py=null,down=false;
    area.addEventListener('pointerdown',e=>{px=e.clientX;py=e.clientY;down=true});
    area.addEventListener('pointerup',e=>{
      if(!down) return; const dx=e.clientX-px; const dy=e.clientY-py;
      if(Math.abs(dx)>Math.abs(dy)*1.5 && Math.abs(dx)>TH){ if(dx<0)nextHero(); else prevHero(); }
      down=false;
    });
    // Клавиатура
    window.addEventListener('keydown',e=>{ if(e.key==='ArrowLeft') prevHero(); else if(e.key==='ArrowRight') nextHero(); });
  }

  // Карточка блюда: УБРАНА кнопка "В заказ"
  
function buildCard(item){
    const el=document.createElement('div');
    el.className='card p-4 flex flex-col';
    el.innerHTML=`
      <div class="flex-grow">
        <div class="flex justify-between items-start">
          <h4 class="font-heading font-bold text-lg pr-2">${locName(item.name)}</h4>
          ${item.veg?`<div class="w-7 h-7 flex-shrink-0 rounded-full bg-green-100 flex items-center justify-center" title="${STR[lang].vegetarian}"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" fill=\"none\" stroke=\"currentColor\" class=\"text-green-600\"><path d=\"M7 14c-3 0-4-1-4-4 0-3 2-6 5-7 3 1 5 4 5 7s-1 4-4 4-2-1-2-1zM4 15c2 2 6 2 8 0\"/></svg></div>`:''}
        </div>
        <p class="text-sm mt-1 text-gray-600">${locName(item.description)||''}</p>
      </div>
      <div class="flex items-center justify-between mt-4">
        <div class="text-lg font-bold" style="color:var(--brand-dark-text)">${fmt(item.price)}</div>
      </div>`;
    // Сделаем карточку "Казан-кабоб" кликабельной — открывает плашку
    if(item.id==='kazan_kebab'){
      el.classList.add('cursor-pointer');
      el.setAttribute('tabindex','0');
      el.setAttribute('role','button');
      el.addEventListener('click',()=>openDishModal('kazan_kebab'));
      el.addEventListener('keydown',e=>{if(e.key==='Enter'||e.key===' '){e.preventDefault();openDishModal('kazan_kebab')}});
    }
    return el
  }


  function matchesQuery(item){const text=(locName(item.name)).toLowerCase();const okQuery=!query||text.includes(query.toLowerCase());const okVeg=!vegOnly||item.veg;return okQuery&&okVeg}

  const activeCatId=()=>Object.keys(CATEGORIES)[activeCatIdx]||Object.keys(CATEGORIES)[0];
  function renderActiveCategory(){
    const root=$('#menu-root'); if(!root) return;
    root.innerHTML='';
    const catId=activeCatId();
    const list=CATEGORIES[catId].map(k=>ITEMS[k]).filter(matchesQuery);
    const sec=document.createElement('section'); sec.id=`cat-${catId}`; sec.className='fade-in';
    sec.innerHTML=`<h2 class="section-title text-3xl font-bold mb-8">${CAT_NAMES[lang][catId]}</h2>`;
    const grid=document.createElement('div'); grid.className='grid sm:grid-cols-2 lg:grid-cols-3 gap-8';
    if(list.length===0){ grid.innerHTML=`<div class='text-gray-500'>Ничего не найдено в этой категории.</div>` } else { list.forEach(it=>grid.appendChild(buildCard(it))) }
    sec.appendChild(grid); root.appendChild(sec);
    setActiveChip(catId);
  }

  function renderCategoryChips(){const box=$('#cat-chips');if(!box)return;const ids=Object.keys(CATEGORIES);box.innerHTML='';ids.forEach(id=>{const b=document.createElement('button');b.className='chip px-3 py-1.5 rounded-full text-sm font-semibold whitespace-nowrap';b.textContent=CAT_NAMES[lang][id];b.dataset.cat=id;b.onclick=()=>goToCategoryId(id);box.appendChild(b)});setActiveChip(activeCatId())}
  function setActiveChip(id){$$('#cat-chips .chip').forEach(c=>c.classList.toggle('active',c.dataset.cat===id))}

  // (UI заказа удалён) Сохраняем тихую работу без ошибок
  function showCart(){}
  function hideCart(){}
  const saveCart=()=>localStorage.setItem('boboy_cart',JSON.stringify(cart));
  function addToCart(id){const ex=cart.find(x=>x.id===id);if(ex)ex.quantity++;else cart.push({id,quantity:1});renderCart()}
  function updateCartQuantity(id,delta){const it=cart.find(x=>x.id===id);if(it){it.quantity+=delta;if(it.quantity<=0)cart=cart.filter(x=>x.id!==id)}renderCart()}
  function renderCart(){saveCart();const list=$('#cart-items'),empty=$('#cart-empty'),sum=$('#cart-summary'),badge=$('#cart-count');if(!list||!empty||!sum||!badge)return;const totalItems=cart.reduce((s,i)=>s+i.quantity,0);badge.textContent=totalItems;badge.classList.toggle('hidden',totalItems===0);if(cart.length===0){list.innerHTML='';empty.classList.remove('hidden');sum.classList.add('hidden');return}empty.classList.add('hidden');sum.classList.remove('hidden');list.innerHTML=cart.map(ci=>{const d=ITEMS[ci.id];if(!d)return'';return`<div class="flex items-center justify-between gap-3 p-2 rounded-lg bg-gray-50"><div><div class="font-semibold">${locName(d.name)}</div><div class="text-sm text-gray-600">${fmt(d.price)}</div></div><div class="flex items-center gap-2"><button class="quantity-change h-8 w-8 rounded-full bg-gray-200 hover:bg-gray-300 transition-colors font-bold" data-id="${ci.id}" data-change="-1">-</button><span class="font-bold w-8 text-center text-lg">${ci.quantity}</span><button class="quantity-change h-8 w-8 rounded-full bg-gray-200 hover:bg-gray-300 transition-colors font-bold" data-id="${ci.id}" data-change="1">+</button></div></div>`}).join('');calculateTotal()}
  function calculateTotal(){const subtotal=cart.reduce((s,i)=>{const d=ITEMS[i.id];return d?s+d.price*i.quantity:s},0);let svc=parseFloat($('#service-charge')?.value);if(isNaN(svc)||svc<0)svc=0;const total=subtotal*(1+svc/100);$('#subtotal-value')&&($('#subtotal-value').textContent=fmt(subtotal));$('#total-value')&&($('#total-value').textContent=fmt(total))}
  function clearCart(){cart=[];renderCart()}

  function populateGroupSelect(){/* интерфейс удалён — пропускаем */}
  function calculateGroupTotal(){/* интерфейс удалён — пропускаем */}

  function bindLangButtons(){$$('#change-language,[data-lang]').forEach(btn=>{btn.addEventListener('click',()=>{const l=btn.getAttribute('data-lang');if(!l){document.body.dispatchEvent(new Event('open-lang-gate'));return}lang=l;localStorage.setItem('boboy_lang',l);init()})})}

  function setupEventListeners(){
    $('#search')?.addEventListener('input',e=>{query=e.target.value;renderActiveCategory()});
    $('#vegOnlyBtn')?.addEventListener('click',()=>{vegOnly=!vegOnly;$('#vegOnlyBtn').classList.toggle('bg-green-100',vegOnly);$('#vegOnlyBtn').classList.toggle('border-green-300',vegOnly);renderActiveCategory()});

    // открыть выбор языка из шапки
    document.body.addEventListener('open-lang-gate', showLangGate);

    // выбор языка в модалке
    $('#lang-gate')?.addEventListener('click',(e)=>{
      const t=e.target.closest('.lang-tile');
      if(!t) return;
      lang=t.dataset.lang; localStorage.setItem('boboy_lang',lang);
      hideLangGate();
      init();
    });

    // поведение декора — при скролле/резайзе ограничиваем картины телом и футером
    const onScrollOrResize=(()=>{let raf=0;return ()=>{if(raf) return;raf=requestAnimationFrame(()=>{raf=0;updateDecorPositions();});};})();
    window.addEventListener('scroll',onScrollOrResize,{passive:true});
    window.addEventListener('resize',onScrollOrResize);
    $('#donkey-art')?.addEventListener('load',onScrollOrResize);
    $('#left-art')?.addEventListener('load',onScrollOrResize);

    if (window.matchMedia('(max-width: 767px)').matches){
      enableCategorySwipe();
      showSwipeHintOnce();
    }
  }

  // свайп между разделами
  function enableCategorySwipe(){let x0=null,y0=null,locked=false;const TH=50;document.body.addEventListener('touchstart',e=>{const t=e.changedTouches[0];x0=t.clientX;y0=t.clientY;locked=false},{passive:true});document.body.addEventListener('touchmove',e=>{if(x0===null||locked)return;const t=e.changedTouches[0],dx=t.clientX-x0,dy=t.clientY-y0;if(Math.abs(dx)>Math.abs(dy)*1.6&&Math.abs(dx)>TH){locked=true;goToSiblingCategory(dx<0?1:-1)}},{passive:true});document.body.addEventListener('touchend',()=>{x0=y0=null;locked=false},{passive:true})}

  function goToCategoryId(id){const ids=Object.keys(CATEGORIES);const idx=ids.indexOf(id);if(idx===-1)return;activeCatIdx=idx;sessionStorage.setItem('active_cat_idx',String(activeCatIdx));renderActiveCategory()}
  function goToSiblingCategory(dir){const ids=Object.keys(CATEGORIES);activeCatIdx=Math.min(ids.length-1,Math.max(0,activeCatIdx+dir));sessionStorage.setItem('active_cat_idx',String(activeCatIdx));renderActiveCategory()}
  function showSwipeHintOnce(){if(sessionStorage.getItem('swipe_hint_shown'))return;sessionStorage.setItem('swipe_hint_shown','1');const h=document.createElement('div');h.className='swipe-hint';h.textContent='Свайпайте по экрану — следующий раздел';document.body.appendChild(h);setTimeout(()=>h.remove(),2600)}

  function init(){
    renderTopCopy();
    startHero(); enableHeroManual();
    renderActiveCategory();
    renderCart(); // молча выйдет, т.к. UI удалён
    if(!localStorage.getItem('boboy_lang')) showLangGate();
    updateDecorPositions();
  }

  function showLangGate(){ const g=$('#lang-gate'); if(g) g.style.display='flex' }
  function hideLangGate(){ const g=$('#lang-gate'); if(g) g.style.display='none' }

  // ====== Ограничение декора ======
  // Осёл: fixed снизу экрана, но "останавливается" перед футером.
  // Левая картинка: ПРИКРЕПЛЯЕТСЯ к ВЕРХНЕМУ ЛЕВОМУ УГЛУ РАЗДЕЛА МЕНЮ (#menu-root),
  // как только отображается (onload), и остаётся выровненной по левому краю контейнера меню.
  // При касании своим низом верха футера — отлипает и фиксируется абсолютом сразу над футером.
  function updateDecorPositions(){
    const donkey=$('#donkey-art');
    const left=$('#left-art');
    const footer=$('footer');
    const menu=$('#menu-root');
    if(!donkey||!left||!footer||!menu) return;

    const scrollY=window.scrollY;
    const footerTopAbs=footer.getBoundingClientRect().top + scrollY; // абсолютный top футера

    // --- Осёл: fixed снизу, но не заходит на футер ---
    const dH=donkey.getBoundingClientRect().height;
    const viewportBottom=scrollY + window.innerHeight;
    if(viewportBottom >= footerTopAbs){
      donkey.style.position='absolute';
      donkey.style.top=(footerTopAbs - dH) + 'px';
      donkey.style.right='0px';
      donkey.style.bottom='';
    }else{
      donkey.style.position='fixed';
      donkey.style.bottom='0px';
      donkey.style.right='0px';
      donkey.style.top='';
    }

    // --- Левая картинка: к верхнему левому УГЛУ ЭКРАНА на уровне секции меню ---
    const menuRect=menu.getBoundingClientRect();
    const leftImgH=left.getBoundingClientRect().height;

    const docTopIfFixed = scrollY + menuRect.top;
    const docBottomIfFixed = docTopIfFixed + leftImgH;

    if(docBottomIfFixed >= footerTopAbs){
      // упёрлись в футер — фиксируем прямо над ним
      left.style.position='absolute';
      left.style.top=(footerTopAbs - leftImgH) + 'px';
      left.style.left= window.scrollX + 'px'; // к левому краю экрана
      left.style.bottom='';
    }else{
      // прикреплена к верхнему левому углу экрана (viewport) на уровне меню
      left.style.position='fixed';
      left.style.top=menuRect.top + 'px';
      left.style.left='0px';
      left.style.bottom='';
    }
  }

  bindLangButtons();
  setupEventListeners();
  init();
  
  // ====== Modal logic for Kazan Kebab ======
  const DISH_IMG_WEBP = {
    'kazan_kebab':'казан-кабоб.webp',
    'lagman_uyghur':'Лагман Уйгурский.webp',
    'beef_kebab':'шашлыки.webp'
  };
  function openDishModal(id){
    const modal=document.getElementById('dish-modal');
    if(!modal) return;
    const item=ITEMS[id];
    const t=document.getElementById('dish-modal-title');
    const d=document.getElementById('dish-modal-desc');
    const p=document.getElementById('dish-modal-price');
    const img=document.getElementById('dish-modal-img');
    t.textContent=locName(item.name);
    d.textContent=HERO_DESC_BY_ID[lang]?.[id] || STR[lang].dishOfDayDesc;
    p.textContent=fmt(item.price);
    img.src=DISH_IMG_WEBP[id]||img.src;
    img.alt=locName(item.name);
    modal.classList.add('open');
    // Prevent background scroll on mobile
    document.body.style.overflow='hidden';
  }
  function closeDishModal(){
    const modal=document.getElementById('dish-modal');
    if(!modal) return;
    modal.classList.remove('open');
    document.body.style.overflow='';
  }
  document.getElementById('dish-modal-close')?.addEventListener('click',closeDishModal);
  document.getElementById('dish-modal')?.addEventListener('click',e=>{ if(e.target.id==='dish-modal') closeDishModal(); });
  window.addEventListener('keydown',e=>{ if(e.key==='Escape') closeDishModal(); });

  </script>

  <!-- Dish modal -->
  <div id="dish-modal" class="menu-modal-mask" role="dialog" aria-modal="true" aria-labelledby="dish-modal-title">
    <div class="menu-modal-card relative modal-enter">
      <button id="dish-modal-close" class="menu-modal-close" aria-label="Закрыть">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
      </button>
      <div class="menu-modal-grid">
        <div class="relative">
          <img id="dish-modal-img" src="казан-кабоб.webp" alt="Kazan Kebab" class="menu-modal-img">
        </div>
        <div class="menu-modal-body">
          <div id="dish-modal-title" class="menu-modal-title">Kazan Kebab</div>
          <p id="dish-modal-desc" class="menu-modal-desc">Казан‑кабоб — мясо и картофель в казане.</p>
          <div id="dish-modal-price" class="menu-modal-price">159&nbsp;000 UZS</div>
        </div>
      </div>
    </div>
  </div>

</body>
</html>
